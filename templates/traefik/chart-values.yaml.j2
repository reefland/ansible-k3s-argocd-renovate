---
image:
  name: traefik
  tag: "{{install.traefik.install_version}}"

dashboard:
  enabled: true

rbac:
  enabled: true

nodeSelector: {"node-role.kubernetes.io/master": "true"}

additionalArguments:
  - "--api.dashboard=true"
  - "--serversTransport.insecureSkipVerify=true"

log:
  level: "INFO"

providers:
  kubernetesingress:
    ingressclass: "traefik-internal"

ports:
  traefik:
    port: 9000
    expose: false
    exposedPort: 9000
    protocol: TCP 
  web:
    port: 8000
    expose: true
    exposedPort: 80
    protocol: TCP
  websecure:
    port: 8443
    expose: true
    exposedPort: 443
    protocol: TCP
  metrics:
    port: 9100
    expose: false
    exposedPort: 9100
    protocol: TCP

service:
  enabled: true
  type: LoadBalancer
  labels:
    release: kube-stack-prometheus

{% if traefik_lb_ip is defined %}
spec:
  loadBalancerIP: "{{traefik_lb_ip}}"
{% endif %}

resources:
   requests:
     cpu: "100m"
     memory: "50Mi"
   limits:
     cpu: "300m"
     memory: "150Mi"

# We will define our own Ingress Route
ingressRoute:
  dashboard:
    enabled: false

